

.. warning::
    **OhmPi is a participative project open to all, it requires skills in electronics and to respect the safety rules. OhmPi must be assembled in a professional context and by people competent in electronics. The OhmPi team cannot be held responsible for any material or human damage which would be associated with the use or the assembly of OHMPI. The OhmPi team cannot be held responsible if the equipment does not work after assembly.**



MUX board v2024
****************************************************

The MUX board v2024 uses the same technology than the MUX board v2023, i.e. mechanical multiplexing. However it introduces
a new level of flexibility by addressing multiple roles (A, B, M, N), which allows to build OhmPi system with multiple of 8 electrodes.
Users can physically configure the MUX board to address 2 roles (A, B or M, N) or 4 roles (A, B, M, N). With only 32 relays,
it can address 16 or 8 electrodes, for the 2- and 4-role configuration respectively.
Given the reduced number of relays, the MUX board v2024 is interfaced with only two MCP23017 I/O expanders.
This means that up to 4 MUX boards v2024 (i.e. 32-electrode system) can be directly connected to a measurement board v2024.
A newly introduced I2C extension board (featuring a TCA9548A multiplexer) allows to connect up to 32 MUX board v2024, equating to a 256-electrode system.
In theory, up to 8 I2C extension boards can be connected to the measurement board, which would allow to pilot 2048 electrodes.
For obvious practical reasons, such a configuration couldn't be tested and is likely to be limited by the I2C bus being phisically too long,
which would prevent to reach so many GPIOs.
In an effort to mitigate supply shortages, a last addition concerns the power mosfet associated with the relays,
with the possibility to mount two types of components depending on market availability: either ZVN4206A or STP16NF06L.

Here, we will present how to assemble and configure a 32-electrode system, based on 4 MUX-board v2024 set up to address 2 roles / 16 electrodes each.

Assembly of MUX board 2024
======================================================


Required components
----------------------------------------------------

.. figure:: ../../../img/mux.2024.0.x/MUX_v2024_components.jpg
       :width: 600px
       :align: center
       :height: 650px
       :alt: alternate text
       :figclass: align-center


.. csv-table:: List of components
   :file: ../mux/MUX_board_2024.csv
   :widths: 30, 70, 70, 70, 70, 35, 35,1
   :header-rows: 1


.. table:: MUX board v2024 PCB (mux.2024.0.0)
   :align: center

   +--------+--------------------------------------------------------------------------------+
   |    1   |   .. image:: ../../../img/mux.2024.0.x/1.jpg                                   |
   +--------+--------------------------------------------------------------------------------+


.. table:: Mount the 100 kOhm resistors.
   :align: center

   +--------+--------------------------------------------------------------------------------+
   |    2   |   .. image:: ../../../img/mux.2024.0.x/2.jpg                                   |
   +--------+--------------------------------------------------------------------------------+

.. table:: Mount the diodes.
   :align: center

   +--------+--------------------------------------------------------------------------------+
   |    2   |   .. image:: ../../../img/mux.2024.0.x/3.jpg                                   |
   +--------+--------------------------------------------------------------------------------+

.. table:: Mount the mosfets. You can chose between ZVN4206A or STP16NF06L.
   :align: center

   +--------+--------------------------------------------------------------------------------+
   |    2   |   .. image:: ../../../img/mux.2024.0.x/4.jpg                                   |
   +--------+--------------------------------------------------------------------------------+

.. table:: Mount the MCP23017 sockets and the capacitors.
   :align: center

   +--------+--------------------------------------------------------------------------------+
   |    2   |   .. image:: ../../../img/mux.2024.0.x/5.jpg                                   |
   +--------+--------------------------------------------------------------------------------+

.. table:: Mount the screw connectors and the IDC connectors.
   :align: center

   +--------+--------------------------------------------------------------------------------+
   |    2   |   .. image:: ../../../img/mux.2024.0.x/6.jpg                                   |
   +--------+--------------------------------------------------------------------------------+

.. table:: Mount the relays.
   :align: center

   +--------+--------------------------------------------------------------------------------+
   |    2   |   .. image:: ../../../img/mux.2024.0.x/7.jpg                                   |
   +--------+--------------------------------------------------------------------------------+